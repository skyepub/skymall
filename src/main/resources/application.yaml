# ================================================================
# SkyMall 애플리케이션 설정 파일
# ================================================================
# Spring Boot는 이 파일을 자동으로 읽어 애플리케이션을 설정한다.
# YAML 형식을 사용하며, 들여쓰기로 계층 구조를 표현한다.
# 예: spring.datasource.url → spring: > datasource: > url:
# ================================================================

# ── 서버 설정 ──
server:
  port: 9090   # 내장 톰캣이 사용할 포트 (기본값: 8080)

# ── Spring 설정 ──
spring:

  # ── 데이터베이스 연결 설정 ──
  # Spring Boot는 이 정보로 DataSource 빈을 자동 생성한다.
  # HikariCP 커넥션 풀이 기본으로 사용된다.
  datasource:
    # JDBC URL: jdbc:mysql://호스트:포트/데이터베이스명?옵션
    # serverTimezone: DB 서버의 타임존 (한국 시간)
    # characterEncoding: 한글 등 유니코드 처리를 위해 UTF-8 설정
    url: jdbc:mysql://home.skyepub.net:63306/skymall?serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    username: root
    password: "Mako2122!"
    # MySQL 전용 JDBC 드라이버 클래스
    driver-class-name: com.mysql.cj.jdbc.Driver

  # ── JPA / Hibernate 설정 ──
  # JPA: Java 표준 ORM 인터페이스
  # Hibernate: JPA의 구현체 (가장 널리 사용됨)
  jpa:
    hibernate:
      # DDL 전략: Entity 클래스를 분석하여 테이블을 자동 관리
      # - none:    아무것도 안 함 (운영 환경 권장)
      # - validate: Entity와 테이블 구조가 일치하는지 검증만
      # - update:  Entity에 맞게 테이블 생성/수정 (컬럼 추가만, 삭제 안 함)
      # - create:  매번 테이블 삭제 후 재생성 (데이터 유실!)
      # - create-drop: 애플리케이션 종료 시 테이블 삭제
      ddl-auto: update

    # SQL 로깅: 실행되는 SQL을 콘솔에 출력 (개발 시 유용)
    show-sql: true

    properties:
      hibernate:
        # SQL 포맷팅: 출력되는 SQL을 보기 좋게 줄바꿈/들여쓰기
        format_sql: true
        # MySQL 전용 방언(Dialect): Hibernate가 MySQL 문법에 맞는 SQL 생성
        dialect: org.hibernate.dialect.MySQLDialect

# ── JWT 인증 설정 ──
# JWT(JSON Web Token): 서버가 세션을 유지하지 않는 Stateless 인증 방식
# 토큰에 사용자 정보를 담아 클라이언트가 보관하고, 매 요청마다 전송한다.
jwt:
  # HMAC-SHA 서명에 사용할 비밀키 (32바이트 이상 필요)
  # 운영 환경에서는 환경변수나 Vault에서 관리해야 한다.
  secret: skymall-secret-key-must-be-at-least-32-bytes-long

  # Access Token 만료 시간: 15분 (900,000 밀리초)
  # 짧게 설정하여 탈취 시 피해를 최소화한다.
  access-expiration: 900000

  # Refresh Token 만료 시간: 7일 (604,800,000 밀리초)
  # Access Token이 만료되면 이 토큰으로 새 토큰 쌍을 발급받는다.
  refresh-expiration: 604800000
